<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:vm="using:KvmSwitch.Desktop.ViewModels"
             x:Class="KvmSwitch.Desktop.Views.ButtonMappingView"
             x:DataType="vm:ButtonMappingViewModel"
             Background="{DynamicResource AppBackgroundBrush}">
    <Grid Margin="16"
          RowDefinitions="Auto,Auto,*"
          ColumnDefinitions="*,Auto"
          RowSpacing="8">
        <TextBlock Text="Egyéb szinkronizáció"
                   FontSize="20"
                   FontWeight="Bold" />

        <Button Grid.Column="1"
                Content="Vissza"
                Command="{Binding CloseCommand}" />

        <TextBlock Grid.Row="1"
                   Grid.ColumnSpan="2"
                   Text="Pico gombok hozzárendelése helyi vagy távoli billentyűparancsokhoz."
                   TextWrapping="Wrap"
                   Foreground="{DynamicResource TextMutedBrush}" />

        <ScrollViewer Grid.Row="2"
                      Grid.ColumnSpan="2">
            <StackPanel Spacing="12">
                <StackPanel Orientation="Horizontal"
                            Spacing="8">
                    <Button Content="Gomb hozzáadása"
                            Command="{Binding AddMappingCommand}" />
                    <Button Content="Mentés"
                            Command="{Binding SaveCommand}" />
                </StackPanel>

                <ItemsControl ItemsSource="{Binding Mappings}">
                    <ItemsControl.ItemTemplate>
                        <DataTemplate x:DataType="vm:ButtonMappingItemViewModel">
                            <Border Background="{DynamicResource PanelBackgroundBrush}"
                                    BorderBrush="{DynamicResource PanelBorderBrush}"
                                    BorderThickness="1"
                                    CornerRadius="4"
                                    Padding="10">
                                <Grid ColumnDefinitions="Auto,*"
                                      ColumnSpacing="12">
                                    <StackPanel Spacing="6">
                                        <Button Width="28"
                                                Height="28"
                                                Background="{Binding IndicatorColor}"
                                                Command="{Binding StartListeningCommand}" />
                                        <TextBlock Text="{Binding ListeningText}"
                                                   FontSize="10"
                                                   Foreground="{DynamicResource TextMutedBrush}" />
                                    </StackPanel>

                                    <StackPanel Grid.Column="1"
                                                Spacing="6">
                                        <TextBlock Text="Gomb azonosító"
                                                   FontWeight="Bold" />
                                        <TextBlock Text="{Binding ButtonIdDisplay}"
                                                   TextWrapping="Wrap" />

                                        <TextBlock Text="Cél"
                                                   FontWeight="Bold" />
                                        <ComboBox ItemsSource="{Binding TargetOptions}"
                                                  SelectedIndex="{Binding TargetIndex, Mode=TwoWay}" />

                                        <TextBlock Text="Akció"
                                                   FontWeight="Bold" />
                                        <TextBox Text="{Binding Action, Mode=TwoWay}"
                                                 Watermark="Pl. Ctrl+Alt+K, F5 vagy VcF21" />

                                        <Button Content="Törlés"
                                                HorizontalAlignment="Left"
                                                Command="{Binding RemoveCommand}" />
                                    </StackPanel>
                                </Grid>
                            </Border>
                        </DataTemplate>
                    </ItemsControl.ItemTemplate>
                </ItemsControl>
            </StackPanel>
        </ScrollViewer>
    </Grid>
</UserControl>
